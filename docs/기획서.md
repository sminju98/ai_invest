📘 금융 에이전트 MVP 기획서 (PRD)
v1.0 As-Is (현재 구현 기준)
v2.0 To-Be (Judge Engine 확장)

🔎 읽는 법

▶️ [v1] : 현재 코드와 1:1 대응되는 기존 기능

🆕 [v2 추가] : Judge Engine 도입으로 새로 추가되는 부분

🔁 [v2 수정] : 기존 개념을 확장/정의 변경한 부분

1. 배경 / 문제 정의
1.1 핵심 가치 제안

[v1]
본 프로젝트는 TradingView 기반 시장 화면 + AI 해설을 결합하여
사용자가 차트, 스크리너, 뉴스 흐름을 빠르게 이해하도록 돕는 것을 목표로 한다.

사용자는 차트를 보며

AI에게 질문하고

현재 상황에 대한 해설을 받는다

🆕 [v2 추가] 판단 중심 재정의

본 서비스의 핵심 가치는
**“분석이 아니라 판단의 번역”**이다.

AI는 내부적으로 복수 분석을 수행하되

사용자에게는 지금 상황에서 취할 수 있는 합리적 선택지만 제시한다

1.2 기술적 제약

[v1]

TradingView 위젯은 iframe/캔버스 기반 → 내부 데이터 접근 불가

AI 해설은 Yahoo Finance / Alpha Vantage / Perplexity 등 외부 정형 데이터 기반

TradingView는 시각적 참고(View Layer) 역할

[v2]

해당 제약은 유지

Judge Engine 또한 동일한 외부 데이터만 사용

1.3 절대 원칙

[v1]

TradingView 위젯 내부 데이터 파싱 금지

실시간 틱 데이터 제공 ❌

투자 조언 ❌

🔁 [v2 수정 – 매우 중요]

❌ 무조건적/단정적 투자 조언 금지

✅ 조건부·맥락 기반 투자 판단 허용

“이런 조건에서는 매수 고려 가능”

“현재는 관망이 합리적”

2. 목표 (Goals)
2.1 사용자 경험 목표

[v1]

차트·뉴스·스크리너를 보며 AI 해설을 빠르게 얻는다

숫자와 데이터를 이해하는 데 도움을 받는다

🆕 [v2 추가]

사용자는 다음 질문에 답을 얻는 것이 목표:

“그래서 지금 이 종목은 어떤 상태지?”

“지금 들어가도 되는 구간인가?”

“굳이 지금 사야 하나?”

2.2 기능 목표

[v1]

TradingView 기반 시장 화면 제공

채팅 기반 AI 해설

뉴스·차트·스크리너 질문 응답

🆕 [v2 추가] Judge Engine 정의

AI 종합 분석(Judge) 는 단순 요약 기능이 아니다

Judge는 투자 판단을 생성하는 엔진이다

Judge는 아래 결과를 반드시 포함한다:

최종 판단(verdict)

판단 확신도(confidence)

판단 근거(구조화)

조건부 행동 가이드

하방/실패 시나리오

원문 수치 데이터(JSON)

3. 비목표 (Non-Goals)

[v1 유지]

전문가용 트레이딩 시스템 ❌

지표 나열형 리포트 ❌

TradingView 내부 데이터 추출 ❌

초단위 실시간 데이터 ❌

🆕 [v2 명시]

확정 수익 보장 ❌

목표가 제시 ❌

4. 사용자 (Primary Users)

[v1 유지]

차트를 보며 해설이 필요한 일반 투자자

뉴스·이슈 맥락을 빠르게 알고 싶은 사용자

🆕 [v2 확장]

판단 보조가 필요한 투자자

“지금 행동해야 하나?”에 답을 원하는 사용자

5. 핵심 사용자 시나리오
5.1 ~ 5.3 (차트 / 스크리너 / 뉴스)

[v1 유지 – 변경 없음]

5.4 종합 판단 (Judge)

[v1]

종합 분석 버튼 클릭

AI가 현재 컨텍스트를 종합해 설명

🆕 [v2 추가 – 핵심]

사용자가 “종합 판단” 버튼 클릭

서버가 다음 컨텍스트 수집

심볼 / 간격

Yahoo OHLCV

스크리너 요약

뉴스 요약

Decision Stack 순서로 판단 수행

시장 컨디션 (Macro)

기업 체력 (Quality)

가격 위치 (Timing)

뉴스/이벤트 (Catalyst & Risk)

대안 비교 (Relative Choice)

Judge Engine이 투자 판단 JSON 생성

결과 저장 (judge_runs/{run_id})

6. AI 판단 구조

[v1]

AI는 다양한 정보를 종합하여 해설 제공

🆕 [v2 추가 – Decision Stack 명문화]

단계	판단 질문
Macro	지금 시장은 리스크를 감수해도 되는 환경인가?
Quality	이 기업은 시간이 편인가?
Timing	지금 진입하면 버틸 수 있는 구간인가?
Catalyst	단기 변수가 있는가?
Relative	굳이 지금 이 종목인가?
7. Judge 출력 스키마

🆕 [v2 신규 섹션 – 공식 규격]

{
  "final_judgment": {
    "verdict": "WAIT | BUY | ACCUMULATE | REDUCE | AVOID",
    "confidence": "LOW | MEDIUM | HIGH"
  },
  "one_line_summary": "string",
  "decision_stack_reasoning": {
    "macro": "string",
    "quality": "string",
    "timing": "string",
    "catalyst_risk": "string",
    "relative_choice": "string"
  },
  "action_guidance": {
    "recommended_action": "string",
    "conditions": ["string"]
  },
  "downside_scenarios": ["string"],
  "raw_data_reference": {
    "signals_used": ["string"],
    "data_timestamp": "ISO-8601",
    "data_sources": ["Yahoo Finance", "Alpha Vantage", "Perplexity"]
  }
}


이 스키마는

/api/judge_stream

Firestore 저장

Front-end UI
의 단일 기준이다.

8. 성공 지표

[v1]

AI 응답 속도

스트리밍 체감

🆕 [v2 추가]

Judge 실행 후 추가 질문 감소율

판단 변경 시 설명 일관성

🔚 요약

v1: “차트 + AI 해설 도구”

v2: “투자 판단을 생성하는 Judge Engine”

👉 v1은 버리지 않고, v2는 ‘위에 얹는다’